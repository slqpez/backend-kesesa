(this["webpackJsonpfrontend-kesesa"]=this["webpackJsonpfrontend-kesesa"]||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(40),o=n.n(a),r=(n(50),n(15)),i=n(5),l=n(17),j=n.n(l),u=n(45),d=n(41),b=n(16),h=(n(82),n(2));var O=function(e){var t=e.url;return b.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(b.c.version,"/pdf.worker.js"),Object(h.jsx)("div",{children:Object(h.jsx)(b.a,{file:t,noData:Object(h.jsx)("div",{style:{float:"left",marginLeft:"50%",marginTop:"10%"}}),children:Object(h.jsx)(b.b,{pageNumber:1,style:{width:"300px"}})})})};n(84);var m=function(e){var t=e.documents;return Object(h.jsx)("div",{className:"DocumentList",children:t.map((function(e){return Object(h.jsx)(O,{url:e.url},e._id)}))})};n(85);var x=function(e){var t=e.addDocument,n=e.handleName,c=e.handleFile;return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"form-document",action:"",onSubmit:t,children:[Object(h.jsx)("label",{className:"label-name-document",htmlFor:"document-name",children:"Ingrese el nombre del documento"}),Object(h.jsx)("input",{className:"input-name-document",id:"document-name",type:"text",name:"document-name",onChange:n}),Object(h.jsx)("label",{htmlFor:"file",className:"label",children:"Selecciona un archivo"}),Object(h.jsx)("input",{className:" file",id:"file",type:"file",name:"file",onChange:c}),Object(h.jsx)("button",{className:"btn-save-document",children:"Guardar documento"})]})})};n(86);var f=function(){return Object(h.jsxs)("div",{className:"sk-chase",children:[Object(h.jsx)("div",{className:"sk-chase-dot"}),Object(h.jsx)("div",{className:"sk-chase-dot"}),Object(h.jsx)("div",{className:"sk-chase-dot"}),Object(h.jsx)("div",{className:"sk-chase-dot"}),Object(h.jsx)("div",{className:"sk-chase-dot"}),Object(h.jsx)("div",{className:"sk-chase-dot"})]})};n(87);var p=function(e){var t=e.content,n=e.type,c=e.showMessage;return Object(h.jsx)("div",{className:n,children:c?Object(h.jsx)("p",{children:t}):null})},v=s.a.createContext();var g=n(43),N=n.n(g);n(105);var y=function(){var e=Object(c.useContext)(v).user.user,t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(null),i=Object(r.a)(o,2),l=i[0],b=i[1],O=Object(c.useState)([]),g=Object(r.a)(O,2),y=g[0],S=g[1],w=Object(c.useState)(!1),k=Object(r.a)(w,2),I=k[0],C=k[1],D=Object(c.useState)(!1),T=Object(r.a)(D,2),A=T[0],E=T[1],_=Object(c.useState)({show:!1,type:"error",content:""}),B=Object(r.a)(_,2),F=B[0],G=B[1];Object(c.useEffect)((function(){(function(e){return fetch("/documents/getDocuments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})({userId:e._id}).then((function(e){return e.json()})).then((function(e){S(e)})).catch((function(e){return console.log(e)}))}),[e._id,I,A]);var J=function(){var t=Object(d.a)(j.a.mark((function t(n){var c,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e._id,n.preventDefault(),E(!0),C(!0),(o=new FormData).append("file",l),o.append("name",s),o.append("userId",c),t.prev=8,t.next=11,r=o,N.a.post("/documents/add",r,{headers:{"content-type":"multipart/form-data"}});case 11:E(!1),C(!1),a(""),G({show:!0,type:"success",content:"Documento agregado correctamente."}),setTimeout((function(){G(Object(u.a)({show:!1},F))}),3e3),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(8),G({show:!0,type:"error",content:"No se pudo agregar el documento."});case 21:case"end":return t.stop()}var r}),t,null,[[8,18]])})));return function(e){return t.apply(this,arguments)}}();return console.log(A),Object(h.jsxs)("div",{className:"Documents",children:[Object(h.jsxs)("section",{className:"add-document-section",children:[Object(h.jsx)(x,{addDocument:J,handleFile:function(e){b(e.target.files[0])},handleName:function(e){a(e.target.value)}}),A?Object(h.jsx)(f,{}):null,Object(h.jsx)(p,{showMessage:F.show,content:F.content,type:F.type})]}),Object(h.jsx)("section",{className:"documents-list-section",children:Object(h.jsx)(m,{documents:y})})]})},S=n.p+"static/media/google_icon.817fc47e.png";n(106);var w=function(e){var t=e.text,n=e.typeBtn,c=e.typeIcon;return Object(h.jsx)("div",{children:Object(h.jsxs)("button",{className:"".concat(n," btn btn-google"),onClick:function(){window.open("/auth/google","_self")},children:[Object(h.jsx)("img",{className:c,src:S,alt:"google-icon"}),t]})})},k=n.p+"static/media/plane.5981d3b9.png";n(107);var I=function(){var e=Object(c.useContext)(v).user.authenticated;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsxs)("div",{className:"text-section",children:[Object(h.jsx)("h1",{children:"GESTIONA TUS DOCUMENTOS"}),Object(h.jsx)("p",{className:"text-section-paragraph",children:"Almacena, gestiona y organiza bien tus viajes a solo un click de distancia."}),e?null:Object(h.jsx)(w,{text:"Ingresar con Google",typeBtn:"btn-home",typeIcon:"btn-icon"})]}),Object(h.jsx)("div",{className:"image-section",children:Object(h.jsx)("img",{className:"plane-image",src:k,alt:"plane"})})]})})};var C=function(){return Object(h.jsx)("div",{children:"Informaci\xf3n de los pa\xedses"})};function D(){var e=Object(c.useContext)(v),t=e.user,n=e.user.authenticated;return console.log(t),Object(h.jsx)("div",{children:Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{exact:!0,path:"/",children:Object(h.jsx)(I,{})}),Object(h.jsx)(i.a,{exact:!0,path:"/documents",children:n?Object(h.jsx)(y,{}):Object(h.jsx)(I,{})}),Object(h.jsx)(i.a,{exact:!0,path:"/about",children:Object(h.jsx)(I,{})}),Object(h.jsx)(i.a,{exact:!0,path:"/infoCountries",children:n?Object(h.jsx)(C,{}):Object(h.jsx)(I,{})})]})})}var T=n(13),A=(n(110),function(){var e=Object(c.useContext)(v).user,t=e.authenticated,n=e.user;return Object(h.jsx)("div",{children:Object(h.jsx)("nav",{className:"nav-bar",children:t?Object(h.jsxs)("ul",{className:"nav-list",children:[Object(h.jsx)("li",{children:Object(h.jsx)(T.b,{to:"/documents",children:"Documentos"})}),Object(h.jsx)("li",{children:Object(h.jsx)(T.b,{to:"/infoCountries",children:"\xbfD\xf3nde viajar?"})}),Object(h.jsxs)("li",{className:"userInfo",children:[Object(h.jsx)("span",{children:n.name}),Object(h.jsx)("img",{className:"profile-picture",src:n.profileImage,alt:"profile"})]}),Object(h.jsx)("li",{children:t?Object(h.jsx)("button",{className:"btn-logout",onClick:function(){window.open("/auth/logout","_self"),localStorage.clear()},children:"Salir"}):Object(h.jsx)(w,{text:"Ingresar",typeBtn:"nav-btn",typeIcon:"nav-icon"})})]}):Object(h.jsxs)("ul",{className:"nav-list",children:[Object(h.jsx)("li",{children:Object(h.jsx)(T.b,{to:"/",children:"Home"})}),Object(h.jsx)("li",{children:Object(h.jsx)(T.b,{to:"/about",children:"Acerca de"})}),Object(h.jsx)("li",{children:Object(h.jsx)(w,{text:"Ingresar",typeBtn:"nav-btn",typeIcon:"nav-icon"})})]})})})});n(111);var E=function(){var e=Object(c.useState)({user:{},authenticated:!1}),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(i.f)();return Object(c.useEffect)((function(){if(Boolean(localStorage.getItem("authenticated"))){var e=JSON.parse(localStorage.getItem("user"));s({user:e,authenticated:!0})}else fetch("/auth/login/success",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){return e})).catch((function(e){console.log(e)})).then((function(e){s({user:e.user[0],authenticated:!0}),localStorage.setItem("user",JSON.stringify(e.user[0])),localStorage.setItem("authenticated","true"),a.push("/documents")})).catch((function(e){return a.push("/")}))}),[s,a]),Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(v.Provider,{value:{user:n,setUser:s},children:[Object(h.jsx)(A,{}),Object(h.jsx)(D,{})]})})};o.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(T.a,{children:Object(h.jsx)(E,{})})}),document.getElementById("root"))},30:function(e,t){},50:function(e,t,n){},75:function(e,t){},76:function(e,t){},77:function(e,t){},78:function(e,t){},79:function(e,t){},82:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.599cffe9.chunk.js.map