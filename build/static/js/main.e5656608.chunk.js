(this["webpackJsonpfrontend-kesesa"]=this["webpackJsonpfrontend-kesesa"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(42),r=n.n(s),o=(n(50),n(6)),i=n(5),l=n(16),u=n.n(l),j=n(26),d=n(18),b=n(10),h=n(15),O=(n(82),n(1));var f=function(e){var t=e.url,n=e.id;return h.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(h.c.version,"/pdf.worker.js"),Object(O.jsx)(b.b,{to:"/document/".concat(n),children:Object(O.jsx)(h.a,{file:t,noData:Object(O.jsx)("div",{style:{float:"left",marginLeft:"50%",marginTop:"10%"}}),children:Object(O.jsx)(h.b,{pageNumber:1,style:{width:"300px"}})})})};n(86);var p=function(e){var t=e.documents;return Object(O.jsx)("div",{className:"DocumentList",children:t.map((function(e){return Object(O.jsx)(f,{url:e.url,id:e._id},e._id)}))})};n(87);var m=function(e){var t=e.addDocument,n=e.handleName,c=e.handleFile,a=e.value;return Object(O.jsx)("div",{children:Object(O.jsxs)("form",{className:"form-document",action:"",onSubmit:t,children:[Object(O.jsx)("label",{className:"label-name-document",htmlFor:"document-name",children:"Ingrese el nombre del documento"}),Object(O.jsx)("input",{className:"input-name-document",id:"document-name",type:"text",name:"document-name",onChange:n,value:a}),Object(O.jsx)("label",{htmlFor:"file",className:"label",children:"Selecciona un archivo"}),Object(O.jsx)("input",{className:" file",id:"file",type:"file",name:"file",onChange:c}),Object(O.jsx)("button",{className:"btn-save-document",children:"Guardar documento"})]})})};n(88);var x=function(){return Object(O.jsxs)("div",{className:"sk-chase",children:[Object(O.jsx)("div",{className:"sk-chase-dot"}),Object(O.jsx)("div",{className:"sk-chase-dot"}),Object(O.jsx)("div",{className:"sk-chase-dot"}),Object(O.jsx)("div",{className:"sk-chase-dot"}),Object(O.jsx)("div",{className:"sk-chase-dot"}),Object(O.jsx)("div",{className:"sk-chase-dot"})]})};n(89);var v=function(e){var t=e.content,n=e.type,c=e.showMessage;return Object(O.jsx)("div",{className:n,children:c?Object(O.jsx)("p",{children:t}):null})},g=a.a.createContext();function N(){return(N=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/documents/getDocuments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/documents/getDocument",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=n(45),w=n.n(S);n(107);var k=function(){var e=Object(c.useContext)(g).user.user,t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(null),i=Object(o.a)(r,2),l=i[0],b=i[1],h=Object(c.useState)([]),f=Object(o.a)(h,2),y=f[0],S=f[1],k=Object(c.useState)(!1),C=Object(o.a)(k,2),I=C[0],D=C[1],T=Object(c.useState)(!1),E=Object(o.a)(T,2),A=E[0],_=E[1],F=Object(c.useState)(!1),B=Object(o.a)(F,2),G=(B[0],B[1],Object(c.useState)({show:!1,type:"",content:""})),J=Object(o.a)(G,2),M=J[0],L=J[1];Object(c.useEffect)((function(){(function(e){return N.apply(this,arguments)})({userId:e._id}).then((function(e){return e.json()})).then((function(e){S(e)})).catch((function(e){return console.log(e)}))}),[e._id,I,A]);var P=function(){var t=Object(d.a)(u.a.mark((function t(n){var c,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),l){t.next=5;break}return L({show:!0,type:"error",content:"No seleccionaste ning\xfan archivo."}),setTimeout((function(){L(Object(j.a)({show:!1},M))}),3e3),t.abrupt("return");case 5:return c=e._id,_(!0),D(!0),(r=new FormData).append("file",l),r.append("name",a),r.append("userId",c),t.prev=12,t.next=15,o=r,w.a.post("/documents/add",o,{headers:{"content-type":"multipart/form-data"}});case 15:_(!1),D(!1),s(""),L({show:!0,type:"success",content:"Documento agregado correctamente."}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(12),L({show:!0,type:"error",content:"No se pudo agregar el documento."});case 24:setTimeout((function(){L(Object(j.a)({show:!1},M))}),3e3);case 25:case"end":return t.stop()}var o}),t,null,[[12,21]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"Documents",children:[Object(O.jsxs)("section",{className:"add-document-section",children:[Object(O.jsx)(m,{addDocument:P,handleFile:function(e){b(e.target.files[0])},handleName:function(e){s(e.target.value)},value:a}),A?Object(O.jsx)(x,{}):null,Object(O.jsx)(v,{showMessage:M.show,content:M.content,type:M.type})]}),Object(O.jsx)("section",{className:"documents-list-section",children:Object(O.jsx)(p,{documents:y})})]})},C=n.p+"static/media/google_icon.817fc47e.png";n(108);var I=function(e){var t=e.text,n=e.typeBtn,c=e.typeIcon;return Object(O.jsx)("div",{children:Object(O.jsxs)("button",{className:"".concat(n," btn btn-google"),onClick:function(){window.open("/auth/google","_self")},children:[Object(O.jsx)("img",{className:c,src:C,alt:"google-icon"}),t]})})},D=n.p+"static/media/plane.5981d3b9.png";n(109);var T=function(){var e=Object(c.useContext)(g).user.authenticated;return Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"text-section",children:[Object(O.jsx)("h1",{children:"GESTIONA TUS DOCUMENTOS"}),Object(O.jsx)("p",{className:"text-section-paragraph",children:"Almacena, gestiona y organiza bien tus viajes a solo un click de distancia."}),e?null:Object(O.jsx)(I,{text:"Ingresar con Google",typeBtn:"btn-home",typeIcon:"btn-icon"})]}),Object(O.jsx)("div",{className:"image-section",children:Object(O.jsx)("img",{className:"plane-image",src:D,alt:"plane"})})]})})};n(110);var E=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],u=Object(c.useState)(""),j=Object(o.a)(u,2),d=j[0],b=j[1];return Object(c.useEffect)((function(){var e;(e=d,fetch("https://travelbriefing.org/".concat(e,"?format=json")).then((function(e){return e.json()})).then((function(e){return e}))).then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}),[d]),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Consulte la informaci\xf3n del pa\xeds que quiera visitar"}),Object(O.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),b(i)},children:[Object(O.jsx)("label",{htmlFor:"country",children:"Ingrese el pa\xeds"}),Object(O.jsx)("input",{type:"text",id:"country",name:"country",onChange:function(e){l(e.target.value)},value:i}),Object(O.jsx)("div",{className:"info",children:0!==Object.keys(n).length?Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["Nombre completo: ",n.names.full," "]}),Object(O.jsxs)("p",{children:["Continente: ",n.names.continent," "]}),Object(O.jsxs)("p",{children:["Moneda: ",n.currency.name," "]}),Object(O.jsxs)("p",{children:["Lenguaje: ",n.language[0].language," "]}),Object(O.jsx)("p",{children:"Tel\xe9fonos importantes:  "}),Object(O.jsxs)("p",{children:["Ambulancia --- ",n.telephone.ambulance]}),Object(O.jsxs)("p",{children:["Policia --- ",n.telephone.police]}),Object(O.jsxs)("p",{children:["C\xf3digo de llamada --- ",n.telephone.calling_code]}),Object(O.jsxs)("p",{children:["Zona horaria: ",n.timezone.name]}),Object(O.jsxs)("p",{children:["Agua: ",n.water.short]}),Object(O.jsx)("p",{children:"Electr\xedcidad: "}),Object(O.jsxs)("p",{children:["Frecuencia: ",n.electricity.frequency]}),Object(O.jsxs)("span",{children:["Tipos de entrada: ",n.electricity.plugs.map((function(e,t){return Object(O.jsx)("span",{children:e},t)}))]})]}):null})]})]})};n(111);var A=function(){h.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(h.c.version,"/pdf.worker.js");var e=Object(c.useState)({}),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(i.f)(),r=Object(i.g)().id;return Object(c.useEffect)((function(){(function(e){return y.apply(this,arguments)})(r).then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}),[r]),Object(O.jsxs)("div",{children:[Object(O.jsx)(h.a,{file:n.url,noData:Object(O.jsx)("div",{style:{float:"left",marginLeft:"50%",marginTop:"10%"}}),children:Object(O.jsx)(h.b,{pageNumber:1,style:{width:"1000px"}})}),Object(O.jsx)("button",{className:"back",onClick:function(){return s.push("/documents")},children:"Volver"})]})};function _(){var e=Object(c.useContext)(g),t=e.user,n=e.user.authenticated;return console.log(t),Object(O.jsx)("div",{children:Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{exact:!0,path:"/",children:Object(O.jsx)(T,{})}),Object(O.jsx)(i.a,{exact:!0,path:"/documents",children:n?Object(O.jsx)(k,{}):Object(O.jsx)(T,{})}),Object(O.jsx)(i.a,{exact:!0,path:"/about",children:Object(O.jsx)(T,{})}),Object(O.jsx)(i.a,{exact:!0,path:"/infoCountries",children:n?Object(O.jsx)(E,{}):Object(O.jsx)(T,{})}),Object(O.jsx)(i.a,{exact:!0,path:"/document/:id",children:n?Object(O.jsx)(A,{}):Object(O.jsx)(T,{})})]})})}n(112);var F=function(){var e=Object(c.useContext)(g).user,t=e.authenticated,n=e.user;return Object(O.jsx)("div",{children:Object(O.jsx)("nav",{className:"nav-bar",children:t?Object(O.jsxs)("ul",{className:"nav-list",children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/documents",children:"Documentos"})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/infoCountries",children:"\xbfD\xf3nde viajar?"})}),Object(O.jsxs)("li",{className:"userInfo",children:[Object(O.jsx)("span",{children:n.name}),Object(O.jsx)("img",{className:"profile-picture",src:n.profileImage,alt:"profile"})]}),Object(O.jsx)("li",{children:t?Object(O.jsx)("button",{className:"btn-logout",onClick:function(){window.open("/auth/logout","_self"),localStorage.clear()},children:"Salir"}):Object(O.jsx)(I,{text:"Ingresar",typeBtn:"nav-btn",typeIcon:"nav-icon"})})]}):Object(O.jsxs)("ul",{className:"nav-list",children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/",children:"Home"})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/about",children:"Acerca de"})}),Object(O.jsx)("li",{children:Object(O.jsx)(I,{text:"Ingresar",typeBtn:"nav-btn",typeIcon:"nav-icon"})})]})})})};n(113);var B=function(){var e=Object(c.useState)({user:{},authenticated:!1}),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(i.f)();return Object(c.useEffect)((function(){if(Boolean(localStorage.getItem("authenticated"))){var e=JSON.parse(localStorage.getItem("user"));a({user:e,authenticated:!0})}else fetch("/auth/login/success",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){return e})).catch((function(e){console.log(e)})).then((function(e){a({user:e.user[0],authenticated:!0}),localStorage.setItem("user",JSON.stringify(e.user[0])),localStorage.setItem("authenticated","true"),s.push("/documents")})).catch((function(e){return s.push("/")}))}),[a,s]),Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(g.Provider,{value:{user:n,setUser:a},children:[Object(O.jsx)(F,{}),Object(O.jsx)(_,{})]})})};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(b.a,{children:Object(O.jsx)(B,{})})}),document.getElementById("root"))},32:function(e,t){},50:function(e,t,n){},75:function(e,t){},76:function(e,t){},77:function(e,t){},78:function(e,t){},79:function(e,t){},82:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.e5656608.chunk.js.map